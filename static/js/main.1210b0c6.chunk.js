(this["webpackJsonpfunction-visualyzer"]=this["webpackJsonpfunction-visualyzer"]||[]).push([[0],{34:function(e,n,t){},35:function(e,n,t){"use strict";t.r(n);var r=t(1),o=t.n(r),a=t(21),i=t.n(a),c=t(13),s=t(6),u=t.n(s),d=t(10),f=t(2),l=t(14),w=t(17),h=t(12),m=t(0),g=t(4),p=h.a.getDictionary(),v=h.a.getDictionary().find((function(e){return"Sin"==e.name}));function x(e){return Object(g.a)(Object(g.a)({},v),{},{name:e,serialize:e,trigger:Object(g.a)(Object(g.a)({},v.trigger),{},{symbol:e})})}var y=[].concat(Object(m.a)(p),[x("\\ln"),x("\\exp"),x("\\abs"),x("\\sign"),x("\\fract")]),S={x:"x",y:"y",t:"t",Pi:"PI",ExponentialE:"E"},b=function(e){try{var n=Object(h.b)(function(e){return e.replace(/\\operatorname{abs}/g,"\\abs ").replace(/\\operatorname{fract}/g,"\\fract ").replace(/\\operatorname{sign}/g,"\\sign ")}(e),{dictionary:y});console.log(n);var t=j(n);return console.log(t),t}catch(r){console.log(r)}},j=function e(n){if(""===n||null===n||void 0===n)throw new Error("Invalid empty token");if(Array.isArray(n)){var t=n[0];switch(t){case"Parentheses":return"(".concat(e(n[1]),")");case"Add":return"(".concat(n.slice(1).map((function(n){return e(n)})).join(" + "),")");case"Subtract":return"(".concat(e(n[1])," - ").concat(e(n[2]),")");case"Multiply":return"(".concat(n.slice(1).map((function(n){return e(n)})).join(" * "),")");case"Divide":return"(".concat(e(n[1])," / ").concat(e(n[2]),")");case"Sqrt":return"sqrt(".concat(e(n[1]),")");case"Power":return"pow(".concat(e(n[1]),", ").concat(e(n[2]),")");case"Sin":return"sin(".concat(e(n[1]),")");case"Cos":return"cos(".concat(e(n[1]),")");case"Tan":return"tan(".concat(e(n[1]),")");case"Arcsin":return"asin(".concat(e(n[1]),")");case"Arccos":return"acos(".concat(e(n[1]),")");case"Arctan":return"atan(".concat(e(n[1]),")");case"Abs":return"abs(".concat(e(n[1]),")");case"Negate":return"-(".concat(e(n[1]),")");case"\\ln":return"log(".concat(e(n[1]),")");case"\\exp":return"exp(".concat(e(n[1]),")");case"\\abs":return"abs(".concat(e(n[1]),")");case"\\sign":return"sign(".concat(e(n[1]),")");case"\\fract":return"fract(".concat(e(n[1]),")");default:throw new Error("Invalid operation token '".concat(t,"'"))}}if("number"==typeof n)return I(n);if("object"==typeof n)return I(n.num);if(n in S)return S[n];throw new Error("Invalid token '".concat(n,"'"))};function I(e){switch((e=e.toString()).indexOf(".")){case-1:return"".concat(e,".0");case e.length-1:return"".concat(e,"0");default:return e}}var L,E={autoCommands:"pi sqrt",autoOperatorNames:"sin cos tan arcsin arccos arctan ln exp abs sign fract"},O=function(){return"#version 300 es\n\nprecision highp float;\n\nout vec2 texCoord;\n\nvoid main(void) {\n    vec2 u = vec2(float((gl_VertexID & 1) << 2), float((gl_VertexID & 2) << 1));\n    texCoord = u * .5;\n    gl_Position = vec4(u - 1.0, 0, 1);\n}\n"},A=function(e){return"#version 300 es\n\n#define PI 3.1415926535897932384626433832795\n#define E 2.718281828459045235360287471352662\n\nprecision highp float;\n\nuniform vec2 u_mouse;\nuniform vec2 u_resolution;\nuniform float u_time;\n\nin vec2 texCoord;\n\nout vec4 fragmentColor;\n\n#define zoom 10.0\n#define isMouseEnabled false\n\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat f(vec2 p, float t) {\n    float x = p.x;\n    float y = p.y;\n    return ".concat(e,";\n}\n\nvoid main(void) {\n    vec2 p = (gl_FragCoord.xy / u_resolution.xy - .5) * zoom;\n    vec2 mouse = (u_mouse.xy / u_resolution.xy - .5) * zoom;\n    if(!isMouseEnabled)\n        mouse = vec2(0.0, 0.0);\n    p.x *= 1.0 * u_resolution.x / u_resolution.y;\n    mouse.x *= 1.0 * u_resolution.x / u_resolution.y;\n    \n    vec3 color = vec3(f(p - mouse, u_time), 1.0, 1.0);\n    fragmentColor = vec4(hsv2rgb(color), 1.0);\n}\n")},D=t(5);function U(e){var n=e.expression,t=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=t.current,r=e.getContext("webgl2");r||alert("No WebGL :("),e.width=e.clientWidth,e.height=e.clientHeight,r.viewport(0,0,r.canvas.width,r.canvas.height),window.vertexShader=k(r,r.VERTEX_SHADER,O()),window.fragmentShader=k(r,r.FRAGMENT_SHADER,A(n)),window.program=function(e,n,t){var r=e.createProgram();if(e.attachShader(r,n),e.attachShader(r,t),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;console.error(e.getProgramInfoLog(r)),e.deleteProgram(r)}(r,window.vertexShader,window.fragmentShader),r.useProgram(window.program),window.resolutionUniformLocation=r.getUniformLocation(window.program,"u_resolution"),r.uniform2f(window.resolutionUniformLocation,r.canvas.width,r.canvas.height),window.mouseUniformLocation=r.getUniformLocation(window.program,"u_mouse"),r.uniform2f(window.mouseUniformLocation,0,0),window.timeUniformLocation=r.getUniformLocation(window.program,"u_time"),r.uniform1f(window.timeUniformLocation,0);var o=Date.now();!function e(){r.uniform1f(window.timeUniformLocation,(Date.now()-o)/1e3),r.drawArrays(r.TRIANGLE_FAN,0,3),requestAnimationFrame(e)}(),window.addEventListener("resize",(function(){e.width=e.clientWidth,e.height=e.clientHeight,r.viewport(0,0,r.canvas.width,r.canvas.height),r.uniform2f(window.resolutionUniformLocation,r.canvas.width,r.canvas.height)})),window.addEventListener("mousemove",(function(n){r.uniform2f(window.mouseUniformLocation,n.x,e.height-n.y,1)}))}),[]),Object(r.useEffect)((function(){var e=t.current.getContext("webgl2");e.detachShader(window.program,window.fragmentShader),e.deleteShader(window.fragmentShader),window.fragmentShader=k(e,e.FRAGMENT_SHADER,A(n)),e.attachShader(window.program,window.fragmentShader),e.linkProgram(window.program),window.resolutionUniformLocation=e.getUniformLocation(window.program,"u_resolution"),e.uniform2f(window.resolutionUniformLocation,e.canvas.width,e.canvas.height),window.mouseUniformLocation=e.getUniformLocation(window.program,"u_mouse"),e.uniform2f(window.mouseUniformLocation,0,0),window.timeUniformLocation=e.getUniformLocation(window.program,"u_time"),e.uniform1f(window.timeUniformLocation,0)}),[n]),Object(D.jsx)(_,{ref:t})}var _=l.a.canvas(L||(L=Object(c.a)(["\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    z-index: 0;\n    background-color: aqua;\n"])));function k(e,n,t){var r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;console.error(e.getShaderInfoLog(r)),e.deleteShader(r)}var H,z=[9,13,16,17,18,20,27,37,33,34,35,36,37,38,39,40,225];function P(e,n){var t=this;this.mathField=e,this.contentEl=n,this.typedHistory=[this.mathField.latex()],this.ctrlIsDown=!1,this.YIsDown=!1,this.ZIsDown=!1,this.currentState=0,this.buffSize=50,this.rearrangeTypedArray=function(){if(t.typedHistory.length>t.buffSize){var e=t.typedHistory.length-t.buffSize;t.currentState=t.currentState-e,t.typedHistory=t.typedHistory.slice(-1*t.buffSize)}},this.isKeyIsUnaffecting=function(e){return z.includes(e)},this.checkIfSpecialKeysAreUpAndSetStates=function(e){switch(e){case 17:t.ctrlIsDown=!1;break;case 89:t.YIsDown=!1;break;case 90:t.ZIsDown=!1}},this.checkIfSpecialKeysAreDownAndSetStates=function(e){switch(e){case 17:t.ctrlIsDown=!0;break;case 89:t.YIsDown=!0;break;case 90:t.ZIsDown=!0}},this.saveState=function(){t.currentState!==t.typedHistory.length-1&&(t.typedHistory=t.typedHistory.slice(0,t.currentState+1)),t.typedHistory.push(t.mathField.latex()),t.rearrangeTypedArray(),t.currentState++},this.undo=function(){0!==t.currentState&&(t.currentState--,t.mathField.latex(t.typedHistory[t.currentState]))},this.redo=function(){t.currentState<t.typedHistory.length-1&&(t.currentState++,t.mathField.latex(t.typedHistory[t.currentState]))},this.contentEl.addEventListener("keyup",(function(e){t.checkIfSpecialKeysAreUpAndSetStates(e.which),!1===t.isKeyIsUnaffecting(e.which)&&(!1===t.ctrlIsDown||t.ctrlIsDown&&86===e.which)&&t.saveState()})),this.contentEl.addEventListener("keydown",(function(e){t.checkIfSpecialKeysAreDownAndSetStates(e.which),t.ctrlIsDown&&t.ZIsDown&&t.undo(),t.ctrlIsDown&&t.YIsDown&&t.redo()}))}Object(w.addStyles)();var C="\\frac{\\left(x^2+y^2\\right)}{x}-0.7t",F=b(C),K=function(e){var n=e.setLatex,t=e.setExpression,o=(e.latex,e.expression,Object(r.useState)(!1)),a=Object(f.a)(o,2),i=a[0],c=a[1],s=function(){var e=Object(d.a)(u.a.mark((function e(r){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(r.latex()),(o=b(r.latex()))&&t(o),c(!o);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(T,{children:Object(D.jsx)(w.EditableMathField,{latex:C,config:E,onChange:s,style:{fontSize:"20px",minWidth:"200px",maxWidth:"85%",margin:"30px 6px 6px 6px",textAlign:"center",backgroundColor:i?"rgba(255, 204, 204, 1)":"rgba(255, 255, 255, 0.9)"},mathquillDidMount:function(e){return new P(e,e.el())}})})})},T=l.a.div(H||(H=Object(c.a)(["\n    position: relative;\n    z-index: 1;\n    /* background-color: red; */\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n"])));function M(){var e=Object(r.useState)(C),n=Object(f.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)(F),i=Object(f.a)(a,2),c=i[0],s=i[1];return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(U,{expression:c}),Object(D.jsx)(K,{latex:t,setLatex:o,expression:c,setExpression:s})]})}t(34);i.a.render(Object(D.jsx)(o.a.StrictMode,{children:Object(D.jsx)(M,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.1210b0c6.chunk.js.map